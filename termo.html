<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Termo de Movimenta√ß√£o e Devolu√ß√£o</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.4; padding: 30px; color: #333; font-size: 12pt; }
        .header { text-align: center; border-bottom: 2px solid #000; margin-bottom: 20px; padding-bottom: 10px; }
        .logo { max-width: 120px; height: auto; margin-bottom: 10px; }
        .titulo { font-weight: bold; text-transform: uppercase; margin: 15px 0; text-align: center; background: #eee; padding: 5px; }
        .box-dados { border: 1px solid #000; padding: 10px; margin: 15px 0; }
        .assinaturas { display: flex; justify-content: space-between; margin-top: 40px; }
        .campo-assinatura { border-top: 1px solid #000; width: 45%; text-align: center; padding-top: 5px; font-size: 0.85rem; }
        .sessao-devolucao { margin-top: 40px; border-top: 2px dashed #000; padding-top: 30px; }
        .checkbox-group { margin: 15px 0; }
        .checkbox-item { margin-bottom: 8px; }
        @media print { .no-print { display: none; } body { padding: 0; } }
    </style>
</head>
<body>
    <div class="no-print" style="margin-bottom: 20px;">
        <button onclick="window.print()" style="padding: 10px 20px; cursor: pointer; background: #27ae60; color: white; border: none; border-radius: 4px;">üñ®Ô∏è Imprimir Termo</button>
        <button onclick="window.close()" style="padding: 10px 20px; cursor: pointer;">Fechar</button>
    </div>

    <div class="header" style="display: flex; flex-direction: column; border-bottom: 2px solid #000; margin-bottom: 15px; padding-bottom: 10px;">
        
        <div style="text-align: left; width: 100%;">
            <img src="logo-prefeitura.png" alt="Logo Prefeitura de Goiana" style="max-width: 250px; height: auto; margin-bottom: 10px;">
        </div>
        
        <div style="text-align: center; width: 100%;">
            <div style="font-weight: bold; font-size: 1.2rem;">PREFEITURA MUNICIPAL DE GOIANA</div>
            <div style="font-size: 0.9rem;">Estado de Pernambuco</div>
            <div style="font-size: 0.9rem; font-weight: bold;">Gabinete do Prefeito - Setor de Tecnologia</div>
        </div>
    </div>

    <p class="titulo">1. TERMO DE TRANSFER√äNCIA E RESPONSABILIDADE</p>
    
    <p>Autorizo a movimenta√ß√£o do equipamento abaixo descrito, sob responsabilidade da Secretaria de destino.</p>

    <div class="box-dados">
        <p><strong>Equipamento:</strong> <span id="item-nome"></span> | <strong>Tombamento:</strong> <span id="item-tombamento"></span></p>
        <p><strong>Marca/Modelo:</strong> <span id="item-marca-modelo"></span></p>
        <p><strong>Origem:</strong> _________________________________ | <strong>Destino:</strong> <span id="item-secretaria"></span></p>
        <p><strong>Autorizado por (Secret√°rio/Respons√°vel):</strong> ____________________________________________</p>
    </div>


    <div style="font-size: 0.85rem; border: 1px solid #000; padding: 10px; margin-top: 10px;">
            <p style="margin: 0 0 10px 0; font-weight: bold; text-align: center; text-decoration: underline;">DEVERES E OBRIGA√á√ïES DO USU√ÅRIO</p>
            <ul style="margin: 0; padding-left: 20px;">
                <li>O equipamento citado √© cedido a t√≠tulo de empr√©stimo, sendo de propriedade do Gabinete do Prefeito da Prefeitura Municipal de Goiana-PE;</li>
                <li>Em situa√ß√µes de roubo, furto ou extravio, deverei informar imediatamente √† chefia de Gabinete deste √≥rg√£o e providenciar boletim de ocorr√™ncia policial e encaminhamento do mesmo a este √≥rg√£o;</li>
                <li>Em casos de danos no equipamento, deverei notificar a chefia de Gabinete deste √≥rg√£o, devendo este avaliar o dano, se o mesmo pode ser reparado ou se o bem dever√° ser tratado como inserv√≠vel, bem como avaliar o valor a ser ressarcido;</li>
                <li>N√£o sendo mais necess√°rio seu uso, ou nas situa√ß√µes de desligamento deste √≥rg√£o, o equipamento dever√° ser devolvido √† chefia de Gabinete, em perfeito estado de conserva√ß√£o, considerando o tempo de uso;</li>
            </ul>
            
            <p style="margin: 10px 0 5px 0; font-weight: bold;">Para equipamentos de inform√°tica:</p>
            <ul style="margin: 0; padding-left: 20px;">
                <li>Poder√° ser solicitada, a qualquer momento, a devolu√ß√£o tempor√°ria do equipamento para que a TI fa√ßa verifica√ß√µes e/ou atualiza√ß√µes de programas;</li>
                <li>Poder√£o ser utilizados apenas sistemas ou aplicativos em conformidade com as leis brasileiras e previamente autorizados pelo Gabinete;</li>
                <li>Nenhuma altera√ß√£o no hardware do equipamento poder√° ser realizada sem o envolvimento da TI.</li>
            </ul>
        </div>

        <div class="assinaturas">
            <div class="campo-assinatura">
                Goiana-PE, <span id="data-atual"></span><br>
                <strong>Respons√°vel pela Entrega / Equipamento</strong>
            </div>
            <div class="campo-assinatura">
                <br>
                <strong>Assinatura do Respons√°vel (Recebedor)</strong><br>
                <small>Concordo com os termos acima</small>
            </div>
        </div>
    

    <div class="sessao-devolucao">
        <p class="titulo">2. TERMO DE DEVOLU√á√ÉO (RECEBIMENTO)</p>
        <p>Atestamos que o equipamento acima descrito foi devolvido em ____/____/____, nas seguintes condi√ß√µes:</p>
        
        <div class="checkbox-group">
            <div class="checkbox-item">( &nbsp; ) Em perfeito estado de conserva√ß√£o e funcionamento.</div>
            <div class="checkbox-item">( &nbsp; ) Apresentando o(s) seguinte(s) defeito(s): __________________________________________</div>
            <div class="checkbox-item">( &nbsp; ) Faltando pe√ßas ou acess√≥rios. Citar: ________________________________________________</div>
        </div>

        <div style="margin-top: 40px; border-top: 1px solid #000; width: 60%; margin-left: auto; margin-right: auto; text-align: center; padding-top: 5px;">
            Respons√°vel pelo Recebimento do Equipamento<br>
            <small>(Nome Leg√≠vel e Matr√≠cula)</small>
        </div>
    </div>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // Suas credenciais
    const firebaseConfig = {
        apiKey: "AIzaSyB7kGKWnj0EeQyPLhFmYE0Otju-AVgOs7U",
        authDomain: "gerenciamento-maquinas-goiana.firebaseapp.com",
        databaseURL: "https://gerenciamento-maquinas-goiana-default-rtdb.firebaseio.com",
        projectId: "gerenciamento-maquinas-goiana",
        storageBucket: "gerenciamento-maquinas-goiana.firebasestorage.app",
        messagingSenderId: "532766971298",
        appId: "1:532766971298:web:d04d1e40d0d349a7a48efb"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 1. Pegamos o ID da URL
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');

    if (id) {
        // 2. Refer√™ncia para o item no Firebase
        const itemRef = ref(db, `equipamentos/${id}`);

        onValue(itemRef, (snapshot) => {
            const item = snapshot.val();

            if (item) {
                // 3. Preenchimento usando SEUS IDs atuais do HTML
                document.getElementById('item-nome').innerText = item.tipo;
                document.getElementById('item-tombamento').innerText = item.tombamento;
                document.getElementById('item-marca-modelo').innerText = `${item.marca} / ${item.modelo}`;
                document.getElementById('item-secretaria').innerText = item.secretaria + " (" + (item.localizacao || "") + ")";
                
                // Opcional: imprimir automaticamente ap√≥s carregar
                // window.print();
            } else {
                alert("Equipamento n√£o encontrado!");
                window.location.href = 'index.html';
            }
        }, { onlyOnce: true });
    } else {
        window.location.href = 'index.html';
    }
</script>
</body>
</html>
